global:
  checkNewVersion: false
  sendAnonymousUsage: false


log:
  level: DEBUG
  # level: INFO
  filePath: /var/log/traefik/traefik.log

accessLog:
  filePath: /var/log/traefik/access_traefik.log


api:
  dashboard: true
  # debug: true


# http:
#   middlewares:
#     authelia:
#       forwardAuth:
#         address: 'https://authelia.feelinglight.com/api/authz/forward-auth'
#         trustForwardHeader: true
#         authResponseHeaders:
#           - 'Remote-User'
#           - 'Remote-Groups'
#           - 'Remote-Email'
#           - 'Remote-Name'
#         tls:
#           certResolver: letsencrypt_regru
#           # ca: '/certificates/ca.public.crt'
#           # cert: '/certificates/traefik.public.crt'
#           # key: '/certificates/traefik.private.pem'


entryPoints:
  web:
    address: :80
    http:
      redirections:
        entryPoint:
          to: web-secure
          scheme: https
          permanent: true

  web-secure:
    address: :443

  ssh:
    address: :2222


certificatesResolvers:
  letsencrypt_regru:
    acme:
      # Тестовый сервер letsencrypt
      # caServer: https://acme-staging-v02.api.letsencrypt.org/directory
      caServer: https://acme-v02.api.letsencrypt.org/directory
      email: kolpacc123@mail.ru
      storage: /letsencrypt/acme.json
      # Период обновления сертификатов, в часах
      # certificatesDuration: 2
      dnsChallenge:
        provider: regru
        # Задержка проверки DNS challenge после добавления TXT записи в reg.ru, в секундах
        delayBeforeCheck: 900


providers:
  file:
    directory: /etc/traefik/services
    watch: true


